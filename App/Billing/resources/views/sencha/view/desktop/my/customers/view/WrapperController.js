/*!
 * Melisa Tasks 1.0.0
 * Copyright (c) 2014-2017 Melisa
 * 2018-04-04 04:04:41
 */
Ext.define("Melisa.billing.view.desktop.my.customers.view.WrapperController",{extend:"Melisa.controller.View",alias:"controller.billingMyCustomersView",requires:["Melisa.controller.View"],listen:{global:{"event.billing.my.customers.update.success":"onUpdatedRecord","event.billing.my.customers.create.success":"onUpdatedRecord","event.billing.my.customersAddresses.create.success":"onUpdatedStoreAddresses","event.billing.my.customersAddresses.update.success":"onUpdatedStoreAddresses"}},storeReload:"customers",windowReportConfig:{title:"Mi razón social"},onUpdatedStoreAddresses:function(){this.getViewModel().getStore("customersAddresses").load()},onSelectionChangeCustomers:function(a,b){var c=this,d=c.lookup("griCustomers");Ext.isEmpty(b)?d.getAction("viewAddresses").disable():d.getAction("viewAddresses").enable()},onClicBtnViewAddresses:function(){var a=this,b=a.getViewModel(),c=a.getView(),d=a.lookup("griCustomers").getSelection();Ext.isEmpty(d)||(b.set("customer",d[0]),b.notify(),b.getStore("customersAddresses").load(),c.setActiveItem(c.down("billingMyCustomersAddressesGrid")),c.setTitle("Direcciónes del cliente"),c.setIconCls("x-fa fa-map-marker"))},onClicBtnReturn:function(){var a=this,b=a.getViewModel(),c=a.getView();c.setTitle(b.get("wrapper").title),c.setIconCls(c.getInitialConfig().iconCls),c.setActiveItem(a.lookup("griCustomers"))},onLoadedModuleAsociate:function(a,b){var c=this,d=c.lookup("griCustomers"),e=d.getSelection()[0];a.fireEvent("loaddata",{id:e.get("id"),idContributor:e.get("idContributor")},b.launcher)},onLoadedModuleAsociateUpdate:function(a,b){var c=b.launcher.getViewModel().get("record");a.fireEvent("loaddata",{id:c.get("id"),idCustomer:c.get("idCustomer")},b.launcher)}});