/*!
 * Melisa Tasks 1.0.0
 * Copyright (c) 2014-2017 Melisa
 * 2018-04-04 04:04:41
 */
Ext.define("Melisa.billing.view.desktop.customers.view.Wrapper",{extend:"Ext.panel.Panel",requires:["Melisa.core.Module","Melisa.ux.grid.Filters","Melisa.ux.FloatingButton","Melisa.ux.confirmation.Button","Melisa.billing.view.desktop.customers.view.Grid","Melisa.billing.view.desktop.customers.view.WrapperController","Melisa.billing.view.universal.customers.view.WrapperModel","Sac.insurance.view.desktop.customersCommissionAgents.Grid","Sac.insurance.view.desktop.customersDealers.Grid","Melisa.people.view.desktop.contacts.view.Grid","Melisa.billing.view.desktop.customersContacts.Grid","Melisa.billing.view.desktop.customersBanksAccounts.Grid","Melisa.billing.view.desktop.customersAddresses.Grid"],mixins:["Melisa.core.Module"],iconCls:"x-fa fa-users",cls:"billing-customers-view",layout:"card",controller:"billingCustomersView",reference:"wrapper",viewModel:{type:"billingCustomerView"},items:[{xtype:"billingCustomerViewGrid",region:"center",reference:"griCustomers",listeners:{itemdblclick:"onShowItemReport",selectionchange:"onSelectionChangeCustomers"},actions:{viewCommissionAgents:{text:"Ver comisionistas",iconCls:"x-fa fa-male",handler:"onClicBtnViewCommissionAgents",disabled:!0},viewDealers:{text:"Ver distribuidores",iconCls:"x-fa fa-arrows-alt",handler:"onClicBtnViewDealers",disabled:!0},viewContacts:{text:"Ver contactos",iconCls:"x-fa fa-arrows-alt",handler:"onClicBtnViewContacts",disabled:!0},viewAddresses:{text:"Ver direcciones",iconCls:"x-fa fa-map-marker",handler:"onClicBtnViewAddresses",disabled:!0}},tbar:["@viewCommissionAgents","@viewDealers","@viewContacts","@viewAddresses"],plugins:[{ptype:"autofilters",filters:{name:{operator:"like"},rfc:{operator:"like"},email:{operator:"like"},repository:{operator:"like"},waytopay:{operator:"like"}}},{ptype:"floatingbutton",configButton:{handler:"moduleRun",iconCls:"x-fa fa-plus",scale:"large",tooltip:"Agregar cliente",bind:{melisa:"{modules.add}",hidden:"{!modules.add.allowed}"}}}]},{xtype:"insuranceCustomersCommissionAgentsGrid",tbar:[{xtype:"toolbar",layout:{type:"hbox",align:"middle"},items:[{scale:"large",iconCls:"x-fa fa-chevron-left",handler:"onClicBtnReturn"},{xtype:"label",bind:{html:["<b>Cliente</b>: {customer.name}","<b>RFC</b>: {customer.rfc}"].join("<br>")}}]}]},{xtype:"insuranceCustomersDealersGrid",tbar:[{xtype:"toolbar",layout:{type:"hbox",align:"middle"},items:[{scale:"large",iconCls:"x-fa fa-chevron-left",handler:"onClicBtnReturn"},{xtype:"label",bind:{html:["<b>Cliente</b>: {customer.name}","<b>RFC</b>: {customer.rfc}"].join("<br>")}}]}]},{xtype:"billingCustomersContactsGrid",tbar:[{xtype:"toolbar",layout:{type:"hbox",align:"middle"},items:[{scale:"large",iconCls:"x-fa fa-chevron-left",handler:"onClicBtnReturn"},{xtype:"label",bind:{html:["<b>Cliente</b>: {customer.name}","<b>RFC</b>: {customer.rfc}"].join("<br>")}}]}],plugins:[{ptype:"floatingbutton",configButton:{iconCls:"x-fa fa-address-card-o",scale:"large",tooltip:"Asociar contacto",bind:{melisa:"{modules.contactsAdd}",hidden:"{!modules.contactsAdd.allowed}"},listeners:{click:"moduleRun",loaded:"onLoadedModuleAsociate"}}}]},{iconCls:"x-fa fa-university",title:"Cuentas bancarias",xtype:"billingCustomersBanksAccountsGrid",hidden:!0,plugins:[{ptype:"floatingbutton",configButton:{iconCls:"x-fa fa-university",scale:"large",tooltip:"Agregar cuenta bancaría",bind:{melisa:"{modules.banksAccountsAdd}",hidden:"{!modules.banksAccountsAdd.allowed}"},listeners:{click:"moduleRun",loaded:"onLoadedModuleAsociate"}}}]},{xtype:"billingCustomersAddressesGrid",tbar:[{xtype:"toolbar",layout:{type:"hbox",align:"middle"},items:[{scale:"large",iconCls:"x-fa fa-chevron-left",handler:"onClicBtnReturn"},{xtype:"label",bind:{html:["<b>Cliente</b>: {customer.name}","<b>RFC</b>: {customer.rfc}"].join("<br>")}}]}],plugins:[{ptype:"autofilters",filters:{country:{operator:"like"},state:{operator:"like"},municipality:{operator:"like"}},filtersIgnore:["id","cratedAt","updatedAt"]},{ptype:"floatingbutton",configButton:{iconCls:"x-fa fa-map-marker",scale:"large",tooltip:"Agregar dirección",bind:{melisa:"{modules.addressesAdd}",hidden:"{!modules.addressesAdd.allowed}"},listeners:{click:"moduleRun",loaded:"onLoadedModuleAsociate"}}}]}]});