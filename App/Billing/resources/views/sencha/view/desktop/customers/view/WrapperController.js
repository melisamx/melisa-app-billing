/*!
 * Melisa Tasks 1.0.0
 * Copyright (c) 2014-2017 Melisa
 * 2018-04-04 04:04:41
 */
Ext.define("Melisa.billing.view.desktop.customers.view.WrapperController",{extend:"Melisa.controller.View",alias:"controller.billingCustomersView",requires:["Melisa.controller.View"],listen:{global:{"event.billing.customers.update.success":"onUpdatedRecord","event.billing.customers.create.success":"onUpdatedRecord","event.billing.customersContacts.create.success":"onUpdatedStoreContacts","event.insurance.customersCommissionAgents.create.success":"onUpdatedStoreCommissionAgents","event.insurance.customersDealers.create.success":"onUpdatedStoreCustomersDealers","event.billing.customersBanksAccounts.create.success":"onUpdatedStoreBanksAccounts","event.billing.customersAddresses.create.success":"onUpdatedStoreAddresses","event.billing.customersAddresses.update.success":"onUpdatedStoreAddresses","event.billing.my.customersAddresses.update.success":"onUpdatedStoreAddresses"}},storeReload:"customers",windowReportConfig:{title:"Cliente"},onClicBtnReturn:function(){var a=this,b=a.getViewModel(),c=a.getView();c.setTitle(b.get("wrapper").title),c.setIconCls(c.getInitialConfig().iconCls),c.setActiveItem(a.lookup("griCustomers"))},onClicBtnViewCommissionAgents:function(){var a=this,b=a.getViewModel(),c=a.getView(),d=a.lookup("griCustomers").getSelection();Ext.isEmpty(d)||(b.set("customer",d[0]),b.notify(),b.getStore("customersCommissionAgents").load(),c.setActiveItem(c.down("insuranceCustomersCommissionAgentsGrid")),c.setTitle("Comisionistas asociados al cliente"),c.setIconCls("x-fa fa-male"))},onClicBtnViewDealers:function(){var a=this,b=a.getViewModel(),c=a.getView(),d=a.lookup("griCustomers").getSelection();Ext.isEmpty(d)||(b.set("customer",d[0]),b.notify(),b.getStore("customersDealers").load(),c.setActiveItem(c.down("insuranceCustomersDealersGrid")),c.setTitle("Distribuidores asociados al cliente"),c.setIconCls("x-fa fa-arrows-alt"))},onClicBtnViewAddresses:function(){var a=this,b=a.getViewModel(),c=a.getView(),d=a.lookup("griCustomers").getSelection();Ext.isEmpty(d)||(b.set("customer",d[0]),b.notify(),b.getStore("customersAddresses").load(),c.setActiveItem(c.down("billingCustomersAddressesGrid")),c.setTitle("Direcci√≥nes del cliente"),c.setIconCls("x-fa fa-map-marker"))},onClicBtnViewContacts:function(){var a=this,b=a.getViewModel(),c=a.getView(),d=a.lookup("griCustomers").getSelection();Ext.isEmpty(d)||(b.set("customer",d[0]),b.notify(),b.getStore("customersContacts").load(),c.setActiveItem(c.down("billingCustomersContactsGrid")),c.setTitle("Contactos del cliente"),c.setIconCls("x-fa fa-address-card-o"))},onUpdatedStoreAddresses:function(){this.getViewModel().getStore("customersAddresses").load()},onUpdatedStoreCustomersDealers:function(){this.getViewModel().getStore("customersDealers").load()},onUpdatedStoreCommissionAgents:function(){this.getViewModel().getStore("customersCommissionAgents").load()},onUpdatedStoreBanksAccounts:function(){this.getViewModel().getStore("customersBanksAccounts").load()},onUpdatedStoreContacts:function(){this.getViewModel().getStore("customersContacts").load()},onSelectionChangeCustomers:function(a,b){var c=this,d=c.lookup("griCustomers");Ext.isEmpty(b)?(d.getAction("viewCommissionAgents").disable(),d.getAction("viewDealers").disable(),d.getAction("viewContacts").disable(),d.getAction("viewAddresses").disable()):(d.getAction("viewCommissionAgents").enable(),d.getAction("viewDealers").enable(),d.getAction("viewContacts").enable(),d.getAction("viewAddresses").enable())},onLoadedModuleAsociateUpdate:function(a,b){var c=b.launcher.getViewModel().get("record");a.fireEvent("loaddata",{id:c.get("id"),idCustomer:c.get("idCustomer")},b.launcher)},onLoadedModuleAsociate:function(a,b){var c=this,d=c.lookup("griCustomers"),e=d.getSelection()[0];a.fireEvent("loaddata",{id:e.get("id"),idContributor:e.get("idContributor")},b.launcher)},onAfterRenderDetails:function(a){a.collapse()}});