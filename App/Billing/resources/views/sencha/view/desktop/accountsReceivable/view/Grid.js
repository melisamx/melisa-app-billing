/*!
 * Melisa Tasks 1.0.0
 * Copyright (c) 2014-2017 Melisa
 * 2018-04-04 04:04:41
 */
Ext.define("Melisa.billing.view.desktop.accountsReceivable.view.Grid",{extend:"Ext.grid.Panel",alias:"widget.billingAccountsReceivableToPayViewGrid",emptyText:"No hay cuentas por cobrar registradas",deferEmptyText:!0,bind:{store:"{accountsReceivable}"},columns:[{dataIndex:"id",text:"Id",hidden:!0},{dataIndex:"account",text:"Cuenta",flex:1,renderer:function(a,b,c){return["<b>",a,"</b><br>",c.get("accountRfc")].join("")}},{dataIndex:"type",text:"Tipo de documento",width:150,renderer:function(a,b,c){return c.get("document").type.name}},{dataIndex:"document",text:"Document",flex:1,renderer:function(a,b,c){var d=c.get("document");return[d.serie.serie,d.folio].join("-")}},{dataIndex:"dateVoucher",text:"Diás para vencer",align:"center",width:170,renderer:function(a,b,c){var d=new Date(a),e=new Date(c.get("dueDate")),f=Math.abs(e.getTime()-d.getTime()),g=Math.ceil(f/864e5);return g}},{xtype:"datecolumn",dataIndex:"dueDate",text:"Fecha de vencimiento",format:"d/m/Y",align:"center",width:170},{dataIndex:"amountCharged",text:"Monto a cobrar",formatter:"usMoney",align:"center",width:130},{dataIndex:"balance",text:"Saldo",formatter:"usMoney",align:"center",width:130},{xtype:"datecolumn",dataIndex:"createdAt",text:"Fecha creación",flex:1,hidden:!0,format:"d/m/Y h:i:s a"},{xtype:"datecolumn",dataIndex:"updatedAt",text:"Fecha modificación",flex:1,format:"d/m/Y h:i:s a",hidden:!0,bind:{hidden:"{hiddenColumns}"}},{xtype:"widgetcolumn",width:30,widget:{xtype:"button",iconCls:"x-fa fa-ban",tooltip:"Saldar cuenta",bind:{melisa:"{modules.payoff}",hidden:"{!modules.payoff.allowed}"},plugins:{ptype:"buttonconfirmation",messageConfirmation:"¿Realmente desea saldar la cuenta?",messageSuccess:"Cuenta saldada"}}}],selModel:{selType:"checkboxmodel"},bbar:{xtype:"pagingtoolbar",displayInfo:!0},features:[{ftype:"grouping",groupHeaderTpl:['<tpl switch="columnName">','<tpl case="repository">',"Cliente base","<tpl default>","{columnName}","</tpl>",': {name} ({rows.length} Registro{[values.rows.length > 1 ? "s" : ""]})']}]});