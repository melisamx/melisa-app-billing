/*!
 * Melisa Tasks 1.0.0
 * Copyright (c) 2014-2017 Melisa
 * 2018-04-04 04:04:41
 */
Ext.define("Melisa.billing.view.desktop.documents.view.Grid",{extend:"Ext.grid.Panel",alias:"widget.billingInvoiceViewGrid",requires:["Melisa.view.desktop.ButtonRecord"],emptyText:"No hay facturas registradas",deferEmptyText:!0,bind:{store:"{documents}"},columns:[{dataIndex:"id",text:"Id",hidden:!0},{dataIndex:"status",text:"Estatus",width:180,renderer:function(a){return a.name}},{dataIndex:"type",text:"Tipo de documento",width:180,renderer:function(a,b,c){return c.get("type").name}},{dataIndex:"customer",text:"RFC",flex:1,renderer:function(a){return['<p style="line-height: 15px"><b>',a.contributor.rfc,"</b><br>",a.contributor.name,"</p>"].join("")}},{dataIndex:"total",text:"Total",align:"center",width:120,renderer:Ext.util.Format.usMoney},{dataIndex:"uuid",text:"UUID",width:280},{dataIndex:"folio",text:"Folio",width:80,renderer:function(a,b,c){return[c.data.serie.serie," - ",a].join("")}},{xtype:"booleancolumn",dataIndex:"active",text:"Activa",width:100},{xtype:"datecolumn",dataIndex:"createdAt",text:"Fecha creación",flex:1,hidden:!0,format:"d/m/Y h:i:s a"},{xtype:"datecolumn",dataIndex:"updatedAt",text:"Fecha modificación",flex:1,format:"d/m/Y h:i:s a",hidden:!0,bind:{hidden:"{hiddenColumns}"}},{xtype:"widgetcolumn",width:30,widget:{xtype:"button",iconCls:"x-fa fa-file-code-o",tooltip:"Descargar factura XML",handler:"onClickBtnDownloadInvoiceXml",bind:{disabled:"{record.uuid ? false : true}"}}},{xtype:"widgetcolumn",width:30,widget:{xtype:"button",iconCls:"x-fa fa-trash",tooltip:"Eliminar factura",bind:{melisa:"{modules.delete}",disabled:"{record.uuid ? true : false}"},plugins:{ptype:"buttonconfirmation",messageConfirmation:"¿Realmente desea eliminar la factura?",messageSuccess:"Factura eliminada",restFull:!0,timeout:9e4}}},{xtype:"widgetcolumn",width:30,widget:{xtype:"button",iconCls:"x-fa fa-file-pdf-o",tooltip:"Descargar factura PDF",handler:"onClickBtnDownloadInvoicePdf",bind:{disabled:"{record.uuid ? false : true}"}}},{xtype:"widgetcolumn",width:30,widget:{xtype:"button",iconCls:"x-fa fa-ban",tooltip:"Cancelar factura",bind:{melisa:"{modules.cancel}",disabled:"{record.uuid ? false : true}"},plugins:{ptype:"buttonconfirmation",messageConfirmation:"¿Realmente desea cancelar la factura?",messageSuccess:"Factura cancelada"}}},{xtype:"widgetcolumn",width:30,widget:{xtype:"button",iconCls:"x-fa fa-money",tooltip:"Generar CFDI",bind:{melisa:"{modules.cfdi}",hidden:"{!modules.cfdi.allowed}",disabled:"{record.uuid}"},plugins:{ptype:"buttonconfirmation",messageConfirmation:"¿Realmente desea generar CFDI?",messageSuccess:"CFDI generado"}}}],selModel:{selType:"checkboxmodel"},bbar:{xtype:"pagingtoolbar",displayInfo:!0},actions:{accountReceivable:{xtype:"buttonRecord",text:"Generar cuenta por cobrar",disabled:!0,bind:{disabled:"{!griInvoice.selection || !griInvoice.selection.uuid}",melisa:"{modules.accountReceivable}",record:"{griInvoice.selection}"},plugins:{ptype:"buttonconfirmation",messageConfirmation:"¿Realmente desea generar cuenta(s) por cobrar?",messageSuccess:"Cuenta por cobrar generada",fieldId:"idDocument",fieldIdRecord:"id"}},debtsToPay:{xtype:"buttonRecord",text:"Generar cuenta por pagar",disabled:!0,bind:{disabled:"{!griInvoice.selection || !griInvoice.selection.uuid}",melisa:"{modules.debtsToPay}",record:"{griInvoice.selection}"},plugins:{ptype:"buttonconfirmation",messageConfirmation:"¿Realmente desea generar cuenta(s) por pagar?",messageSuccess:"Cuenta por pagar generada",fieldId:"idDocument",fieldIdRecord:"id"}}},tbar:{xtype:"toolbar",defaultActionType:"buttonRecord",items:["@accountReceivable","@debtsToPay"]}});